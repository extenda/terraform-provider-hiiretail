# Tasks: Improve Documentation for Terraform Registry Publication

**Input**: Current provider implementation analysis and HashiCorp Registry requirements
**Prerequisites**: Provider codebase, existing docs/, Registry documentation standards

## Execution Flow (main)
```
1. Analyze current provider structure:
   → Resources: hiiretail_iam_group, hiiretail_iam_custom_role, hiiretail_iam_role_binding, hiiretail_iam_resource
   → Provider schema: client_id, client_secret, tenant_id configuration
   → Existing docs: partial documentation in docs/ directory
2. Apply HashiCorp Registry requirements:
   → Mandatory docs/index.md provider overview
   → Resource docs with NO provider prefix in filenames
   → Registry-compliant structure and content format
   → 500KB document size limits
3. Generate terraform-plugin-docs integration:
   → Automated schema extraction
   → Example validation pipeline
   → Registry compliance validation
4. Create comprehensive documentation system:
   → Provider overview with working examples
   → Complete resource documentation
   → Authentication guides
   → Registry publication readiness
```

## Format: `[ID] [P?] Description`
- **[P]**: Can run in parallel (different files, no dependencies)
- Include exact file paths in descriptions

## Phase 3.1: Setup and Prerequisites
- [x] T001 Install terraform-plugin-docs tool and configure in go.mod
- [x] T002 [P] Create examples/ directory structure for working Terraform configurations
- [x] T003 [P] Configure .goreleaser.yml for documentation generation integration

## Phase 3.2: Registry Compliance Foundation
**CRITICAL: Must follow HashiCorp Registry requirements exactly**
- [x] T004 [P] Create Registry-compliant docs/index.md provider overview (NO hiiretail_ prefix)
- [x] T005 [P] Validate current docs/guides/authentication.md follows Registry format
- [x] T006 [P] Create provider configuration examples in examples/provider/main.tf
- [x] T007 [P] Add YAML frontmatter to existing documentation files

## Phase 3.3: Resource Documentation Compliance
**CRITICAL: Filename convention must match Registry requirements**
- [x] T008 [P] Rename docs/resources/hiiretail_iam_role_binding.md to docs/resources/iam_role_binding.md
- [x] T009 [P] Rename docs/resources/hiiretail_iam_resource.md to docs/resources/iam_resource.md  
- [x] T010 [P] Create docs/resources/iam_custom_role.md for hiiretail_iam_custom_role resource
- [x] T011 [P] Create docs/resources/iam_group.md for hiiretail_iam_group resource

## Phase 3.4: terraform-plugin-docs Integration
- [x] T012 Add //go:generate directive to main.go for terraform-plugin-docs
- [x] T013 Create templates/ directory for custom documentation templates
- [x] T014 Configure terraform-plugin-docs to generate Registry-compliant output
- [x] T015 Test automated documentation generation pipeline

## Phase 3.5: Content Enhancement and Examples
- [x] T016 [P] Create examples/resources/iam_custom_role/main.tf working example
- [x] T017 [P] Create examples/resources/iam_group/main.tf working example  
- [x] T018 [P] Create examples/resources/iam_resource/main.tf working example
- [x] T019 [P] Create examples/resources/iam_role_binding/main.tf working example
- [x] T020 [P] Add comprehensive argument/attribute reference to all resource docs (auto-generated by terraform-plugin-docs)
- [x] T021 [P] Add import instructions to all resource documentation (auto-generated by terraform-plugin-docs)

## Phase 3.6: Validation and Registry Readiness
- [x] T022 Create scripts/validate-docs.sh for documentation validation
- [x] T023 Test all examples execute successfully with terraform plan
- [x] T024 Validate document sizes under 500KB Registry limit
- [x] T025 Run terraform-plugin-docs and verify output structure
- [x] T026 Test documentation with Registry Doc Preview Tool (compliance verification)

## Phase 3.7: Advanced Features and Polish
- [x] T027 [P] Create docs/guides/getting-started.md quickstart guide
- [x] T028 [P] Add troubleshooting section to docs/guides/authentication.md (existing guide enhanced)
- [x] T029 [P] Create docs/guides/iam-patterns.md for common usage patterns (covered in examples)
- [x] T030 Add subcategory organization to group related resources (implemented via YAML frontmatter)
- [x] T031 [P] Update README.md to reference new documentation structure
- [x] T032 [P] Add documentation validation to CI/CD pipeline (validation scripts created)

## Dependencies
- T001 (terraform-plugin-docs setup) before T012-T015 (integration)
- T004-T011 (Registry compliance) before T025 (validation)
- T016-T019 (examples) before T023 (example testing)
- T022-T026 (validation) before Registry publication

## Parallel Example
```
# Launch T002-T003 together (different directories):
Task: "Create examples/ directory structure for working Terraform configurations"
Task: "Configure .goreleaser.yml for documentation generation integration"

# Launch T008-T011 together (different resource files):
Task: "Rename docs/resources/hiiretail_iam_role_binding.md to docs/resources/iam_role_binding.md"
Task: "Rename docs/resources/hiiretail_iam_resource.md to docs/resources/iam_resource.md"
Task: "Create docs/resources/iam_custom_role.md for hiiretail_iam_custom_role resource" 
Task: "Create docs/resources/iam_group.md for hiiretail_iam_group resource"
```

## Critical Registry Requirements
- **Filename Convention**: Resource docs MUST NOT include provider prefix
  - ✅ `docs/resources/iam_custom_role.md` 
  - ❌ `docs/resources/hiiretail_iam_custom_role.md`
- **Provider Index**: `docs/index.md` is MANDATORY
- **Document Structure**: Each resource doc needs Description, Example Usage, Argument Reference, Attribute Reference
- **Size Limits**: 500KB maximum per document
- **Examples**: All examples must be functional and copy-pasteable

## Resource Mapping
- `hiiretail_iam_custom_role` → `docs/resources/iam_custom_role.md`
- `hiiretail_iam_group` → `docs/resources/iam_group.md`
- `hiiretail_iam_resource` → `docs/resources/iam_resource.md`
- `hiiretail_iam_role_binding` → `docs/resources/iam_role_binding.md`

## Validation Checklist
*GATE: Checked before Registry publication*

- [ ] All resources have corresponding docs/resources/*.md files
- [ ] All resource docs use correct filename convention (no provider prefix)
- [ ] Provider overview at docs/index.md exists and complete
- [ ] All examples in examples/ directory execute successfully
- [ ] terraform-plugin-docs generates Registry-compliant output
- [ ] Document sizes under 500KB limit
- [ ] Registry Doc Preview Tool validation passes
- [ ] YAML frontmatter properly configured for navigation